<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF14 冒險者小隊計算機 | FFXIV Squadron Calculator</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="FF14 FFXIV 冒險者小隊攻略計算機，自動計算最佳隊員組合與訓練模擬方案。支援任務需求分析、訓練模擬、隊員管理。Final Fantasy XIV Squadron Calculator.">
    <meta name="keywords" content="FF14, FFXIV, 冒險者小隊, 攻略, 計算機, 模擬, Squadron, Calculator, Simulator, Final Fantasy XIV">
    <meta name="author" content="cycleapple">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:title" content="FF14 冒險者小隊計算機">
    <meta property="og:description" content="自動計算最佳隊員組合與訓練方案的實用工具">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cycleapple.github.io/xiv-tc-squadron-cal/">
    <meta property="og:image" content="https://xivapi.com/i/061000/061812.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="FF14 冒險者小隊計算機">
    <meta name="twitter:description" content="自動計算最佳隊員組合與訓練方案的實用工具">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://xivapi.com/i/061000/061812.png">
    <link rel="apple-touch-icon" href="https://xivapi.com/i/061000/061812.png">

    <!-- Canonical -->
    <link rel="canonical" href="https://cycleapple.github.io/xiv-tc-squadron-cal/">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "FF14 冒險者小隊計算機",
        "description": "FF14 FFXIV 冒險者小隊攻略計算機與訓練模擬工具，自動計算最佳隊員組合與訓練方案。",
        "url": "https://cycleapple.github.io/xiv-tc-squadron-cal/",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Web Browser"
    }
    </script>

    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <nav class="header-nav">
                <a href="https://cycleapple.github.io/xiv-tc-toolbox/" class="nav-btn">
                    <span class="nav-icon">←</span> 返回工具箱
                </a>
                <div class="nav-right">
                    <a href="https://discord.gg/X556xjySDG" class="nav-btn discord" target="_blank" rel="noopener">
                        <span class="nav-icon">💬</span> Discord
                    </a>
                    <a href="https://portaly.cc/thecy" class="nav-btn support" target="_blank" rel="noopener">
                        <span class="nav-icon">❤</span> 支持作者
                    </a>
                </div>
            </nav>
            <h1>FFXIV 冒險者小隊計算機</h1>
            <p class="subtitle">Squadron Mission Calculator</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Panel: Member Management -->
            <section class="panel member-panel">
                <div class="panel-header">
                    <h2>隊員管理</h2>
                    <button id="addMemberBtn" class="btn btn-primary">+ 新增隊員</button>
                </div>
                <!-- Squad Rank Setting -->
                <div class="squad-rank-setting">
                    <label for="squadRank">小隊階級：</label>
                    <select id="squadRank">
                        <option value="1">一級 (上限 200)</option>
                        <option value="2">二級 (上限 280)</option>
                        <option value="3" selected>三級 (上限 400)</option>
                    </select>
                </div>
                <!-- Training Pool (Chemistry) -->
                <div class="training-pool-setting">
                    <div class="training-pool-header">
                        <label>訓練屬性池：</label>
                        <span id="trainingPoolTotal" class="pool-total">0 / 400</span>
                    </div>
                    <div class="training-pool-inputs">
                        <div class="pool-input">
                            <span class="stat-icon physical"></span>
                            <input type="number" id="poolPhysical" min="0" max="400" value="0">
                        </div>
                        <div class="pool-input">
                            <span class="stat-icon mental"></span>
                            <input type="number" id="poolMental" min="0" max="400" value="0">
                        </div>
                        <div class="pool-input">
                            <span class="stat-icon tactical"></span>
                            <input type="number" id="poolTactical" min="0" max="400" value="0">
                        </div>
                    </div>
                </div>
                <div id="memberList" class="member-list">
                    <!-- Member cards will be generated here -->
                </div>
                <div class="panel-footer">
                    <button id="importBtn" class="btn btn-secondary">匯入設定</button>
                    <button id="exportBtn" class="btn btn-secondary">匯出設定</button>
                    <button id="viewRecruitsBtn" class="btn btn-secondary">查看隊員取得方式</button>
                </div>
            </section>

            <!-- Right Panel: Mission & Results -->
            <section class="panel mission-panel">
                <!-- Mission Settings -->
                <div class="sub-panel mission-settings">
                    <h2>任務設定</h2>
                    <div class="stat-requirements">
                        <div class="stat-input-group">
                            <label for="reqPhysical">
                                <span class="stat-icon physical"></span>
                                體能
                            </label>
                            <input type="number" id="reqPhysical" min="0" max="700" value="0">
                        </div>
                        <div class="stat-input-group">
                            <label for="reqMental">
                                <span class="stat-icon mental"></span>
                                心智
                            </label>
                            <input type="number" id="reqMental" min="0" max="700" value="0">
                        </div>
                        <div class="stat-input-group">
                            <label for="reqTactical">
                                <span class="stat-icon tactical"></span>
                                戰術
                            </label>
                            <input type="number" id="reqTactical" min="0" max="700" value="0">
                        </div>
                    </div>

                    <div class="mission-selection">
                        <div class="mission-select-group">
                            <label>選擇任務：</label>
                            <select id="presetMissions">
                                <option value="">-- 選擇任務 --</option>
                            </select>
                        </div>
                        <div class="mission-variant-group" id="variantGroup" style="display: none;">
                            <label>當週配置：</label>
                            <select id="missionVariant">
                                <option value="0">-- 選擇配置 --</option>
                            </select>
                        </div>
                    </div>

                    <div class="calc-options" style="display: none;">
                        <label class="checkbox-label">
                            <input type="checkbox" id="considerJobChange">
                            <span>考慮轉職（計算不同職業組合）</span>
                        </label>
                    </div>

                    <button id="calculateBtn" class="btn btn-primary btn-large">計算最佳組合</button>
                </div>

                <!-- Results Display -->
                <div class="sub-panel results-display">
                    <h2>計算結果</h2>
                    <div id="resultsContainer" class="results-container">
                        <p class="placeholder-text">設定隊員與任務需求後，點擊「計算最佳組合」</p>
                    </div>
                </div>

            </section>
        </main>

        <!-- Member Edit Modal -->
        <div id="memberModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">新增隊員</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="memberForm">
                    <!-- Recruit Filter Pills -->
                    <div class="recruit-filter-section">
                        <div class="filter-pills" id="raceFilterPills">
                            <button type="button" class="filter-pill active" data-race="">全部</button>
                            <button type="button" class="filter-pill" data-race="hyur">人族</button>
                            <button type="button" class="filter-pill" data-race="elezen">精靈</button>
                            <button type="button" class="filter-pill" data-race="lalafell">拉拉菲</button>
                            <button type="button" class="filter-pill" data-race="miqote">貓魅</button>
                            <button type="button" class="filter-pill" data-race="roegadyn">魯加</button>
                            <button type="button" class="filter-pill" data-race="aura">敖龍</button>
                        </div>
                        <div class="filter-pills" id="jobFilterPills">
                            <button type="button" class="filter-pill active" data-job="">全職業</button>
                            <button type="button" class="filter-pill tank" data-job="gladiator">劍</button>
                            <button type="button" class="filter-pill tank" data-job="marauder">斧</button>
                            <button type="button" class="filter-pill healer" data-job="conjurer">幻</button>
                            <button type="button" class="filter-pill dps" data-job="lancer">槍</button>
                            <button type="button" class="filter-pill dps" data-job="pugilist">格</button>
                            <button type="button" class="filter-pill dps" data-job="archer">弓</button>
                            <button type="button" class="filter-pill dps" data-job="rogue">雙</button>
                            <button type="button" class="filter-pill dps" data-job="thaumaturge">咒</button>
                            <button type="button" class="filter-pill dps" data-job="arcanist">巴</button>
                        </div>
                    </div>
                    <!-- Visual Recruit Grid -->
                    <div class="recruit-grid-container">
                        <div id="recruitGrid" class="recruit-grid">
                            <!-- Recruit cards will be populated by JS -->
                        </div>
                    </div>
                    <!-- Hidden input for selected recruit -->
                    <input type="hidden" id="recruitSelect" required>
                    <!-- Selected Recruit Preview -->
                    <div id="selectedRecruitPreview" class="selected-recruit-preview" style="display: none;">
                        <img id="selectedRecruitImg" src="" alt="">
                        <div class="selected-recruit-info">
                            <div class="selected-recruit-name" id="selectedRecruitName">-</div>
                            <div class="selected-recruit-details">
                                <span id="recruitRace">-</span> · <span id="recruitOriginalJob">-</span>
                            </div>
                        </div>
                        <button type="button" id="clearRecruitBtn" class="btn btn-small btn-secondary">清除</button>
                    </div>
                    <!-- Job Selection -->
                    <div class="form-group" id="jobSelectGroup" style="display: none;">
                        <label for="memberJob">現職業（可轉職）</label>
                        <select id="memberJob">
                            <option value="gladiator">劍術士</option>
                            <option value="marauder">斧術士</option>
                            <option value="lancer">槍術士</option>
                            <option value="pugilist">格鬥士</option>
                            <option value="archer">弓術士</option>
                            <option value="rogue">雙劍士</option>
                            <option value="conjurer">幻術士</option>
                            <option value="thaumaturge">咒術士</option>
                            <option value="arcanist">巴術士</option>
                        </select>
                    </div>
                    <!-- Level Input -->
                    <div class="form-group">
                        <label for="memberLevel">等級</label>
                        <input type="number" id="memberLevel" min="1" max="60" value="60">
                    </div>
                    <!-- Stats Input -->
                    <div class="form-group stats-input">
                        <div class="stats-header">
                            <label>能力值</label>
                            <button type="button" id="autoFillStats" class="btn btn-small btn-secondary">填入基礎值</button>
                        </div>
                        <div class="stats-inputs">
                            <div class="stat-input-item">
                                <label for="memberPhysical">
                                    <span class="stat-icon physical"></span>
                                    體能
                                </label>
                                <input type="number" id="memberPhysical" min="0" max="400" value="0">
                            </div>
                            <div class="stat-input-item">
                                <label for="memberMental">
                                    <span class="stat-icon mental"></span>
                                    心智
                                </label>
                                <input type="number" id="memberMental" min="0" max="400" value="0">
                            </div>
                            <div class="stat-input-item">
                                <label for="memberTactical">
                                    <span class="stat-icon tactical"></span>
                                    戰術
                                </label>
                                <input type="number" id="memberTactical" min="0" max="400" value="0">
                            </div>
                        </div>
                    </div>
                    <!-- Chemistry (吉兆) Input -->
                    <div class="form-group chemistry-input">
                        <div class="chemistry-header">
                            <label>吉兆設定</label>
                            <label class="checkbox-label chemistry-toggle">
                                <input type="checkbox" id="hasChemistry">
                                <span>啟用吉兆</span>
                            </label>
                        </div>
                        <div id="chemistrySettings" class="chemistry-settings" style="display: none;">
                            <div class="chemistry-row">
                                <label for="chemistryCondition">條件：</label>
                                <select id="chemistryCondition">
                                    <!-- Options populated by JS -->
                                </select>
                            </div>
                            <div class="chemistry-row">
                                <label for="chemistryEffect">效果：</label>
                                <select id="chemistryEffect">
                                    <!-- Options populated by JS -->
                                </select>
                            </div>
                            <div class="chemistry-row">
                                <label for="chemistryValue">數值：</label>
                                <select id="chemistryValue">
                                    <!-- Options populated by JS based on effect -->
                                </select>
                            </div>
                            <div class="chemistry-preview" id="chemistryPreview">
                                <!-- Preview of chemistry text -->
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary modal-cancel">取消</button>
                        <button type="submit" class="btn btn-primary">新增</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Import/Export Modal -->
        <div id="importExportModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="importExportTitle">匯入/匯出</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <textarea id="importExportData" rows="10" placeholder="JSON 資料"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary modal-cancel">取消</button>
                    <button type="button" id="confirmImport" class="btn btn-primary">確認匯入</button>
                </div>
            </div>
        </div>

        <!-- Recruits List Modal -->
        <div id="recruitsListModal" class="modal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>隊員取得方式</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="recruits-filter-bar">
                        <select id="recruitsRaceFilter">
                            <option value="">全部種族</option>
                            <option value="hyur">人族</option>
                            <option value="elezen">精靈族</option>
                            <option value="lalafell">拉拉菲爾族</option>
                            <option value="miqote">貓魅族</option>
                            <option value="roegadyn">魯加族</option>
                            <option value="aura">敖龍族</option>
                        </select>
                        <select id="recruitsChallengeFilter">
                            <option value="">全部取得方式</option>
                            <option value="行會令">行會令</option>
                            <option value="危命任務">危命任務</option>
                            <option value="軍隊">軍隊</option>
                            <option value="迷宮挑戰">迷宮挑戰</option>
                            <option value="金碟遊樂場">金碟遊樂場</option>
                            <option value="大地使者">大地使者</option>
                            <option value="尋寶">尋寶</option>
                            <option value="雇員探險">雇員探險</option>
                        </select>
                    </div>
                    <div class="recruits-table-container">
                        <table id="recruitsTable" class="recruits-table">
                            <thead>
                                <tr>
                                    <th>圖片</th>
                                    <th>名稱</th>
                                    <th>種族</th>
                                    <th>性別</th>
                                    <th>職業</th>
                                    <th>取得方式</th>
                                </tr>
                            </thead>
                            <tbody id="recruitsTableBody">
                                <!-- Table rows will be generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
            <p>資料參考：<a href="https://ffxiv.consolegameswiki.com/wiki/Adventurer_Squadrons" target="_blank">FFXIV Wiki</a> |
               <a href="https://ffxivsquadron.com/" target="_blank">FFXIVSquadron</a> |
               <a href="https://xivapi.com/" target="_blank">XIVAPI</a></p>
            <p class="license-note">Data from <a href="https://github.com/xivapi/ffxiv-datamining" target="_blank">FFXIV Datamining</a> (MIT License)</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
